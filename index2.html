<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sarkar Telecom - Home</title>
  <style>
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#0f1115;color:#e7eaf0;text-align:center;}
    header{background:#171a21;padding:14px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;}
    header h1{color:#06b6d4;margin:0;display:flex;align-items:center;gap:6px;}
    nav a{color:#e7eaf0;text-decoration:none;margin:0 10px;font-weight:600;}
    nav a:hover{color:#06b6d4;}
    .auth-box{display:flex;align-items:center;gap:10px;}
    .btn{padding:6px 12px;border-radius:6px;border:none;cursor:pointer;font-weight:700;}
    .btn-login{background:#06b6d4;color:#001;}
    .btn-logout{background:#ef4444;color:#fff;}
    .ticker{background:#111827;color:#facc15;padding:6px;font-weight:bold;overflow:hidden;white-space:nowrap;}
    .ticker span{display:inline-block;padding-left:100%;animation:scroll-left 15s linear infinite;}
    @keyframes scroll-left{0%{transform:translateX(0);}100%{transform:translateX(-100%);}}
    .hero{padding:60px 20px;}
    .hero h2{font-size:28px;color:#06b6d4;}
    .hero p{color:#9aa3b2;margin:10px 0 20px;}
    .btn-main{background:#06b6d4;color:#001;padding:10px 20px;border-radius:6px;text-decoration:none;font-weight:bold;}
    .btn-main:hover{background:#0ea5e9;}
    .features{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;padding:30px;max-width:900px;margin:auto;}
    .feature{background:#171a21;padding:20px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.4);}
    .feature h3{color:#06b6d4;margin-top:0;}
    #footer{margin-top:40px;}
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <h1>üíé Sarkar Telecom</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="order.html">Order</a>
      <a href="order-history.html">History</a>
      <a href="profile.html">Profile</a>
    </nav>
    <div class="auth-box">
      <span id="userName">Checking...</span>
      <button id="loginBtn" class="btn btn-login" style="display:none;">Login</button>
      <button id="logoutBtn" class="btn btn-logout" style="display:none;">Logout</button>
    </div>
  </header>

  <!-- üîî Live Updates -->
  <div class="ticker"><span id="liveTicker">‚è≥ ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</span></div>

  <!-- Hero -->
  <section class="hero">
    <h2>Welcome to Sarkar Telecom</h2>
    <p>Fast & Secure Online Recharge Service</p>
    <a href="order.html" class="btn-main">üöÄ Order Now</a>
  </section>

  <!-- Features -->
  <section class="features">
    <div class="feature">
      <h3>‚ö° ‡¶´‡¶æ‡¶∏‡ßç‡¶ü ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú</h3>
      <p>‡¶á‡¶®‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶ü‡¶™-‡¶Ü‡¶™ & ‡¶ó‡ßá‡¶Æ‡¶ø‡¶Ç ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú‡•§</p>
    </div>
    <div class="feature">
      <h3>üìã ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç</h3>
      <p>‡¶Ö‡¶§‡ßÄ‡¶§‡ßá‡¶∞ ‡¶∏‡¶¨ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶π‡¶ú‡ßá‡¶á ‡¶ö‡ßá‡¶ï ‡¶ì ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
    </div>
    <div class="feature">
      <h3>üîê ‡¶∏‡¶ø‡¶ï‡¶ø‡¶â‡¶∞ ‡¶≤‡¶ó‡¶á‡¶®</h3>
      <p>‡¶´‡¶æ‡ßü‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶¶‡¶ø‡ßü‡ßá ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶ authentication‡•§</p>
    </div>
    <div class="feature">
      <h3>üì± ‡ß®‡ß™/‡ß≠ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</h3>
      <p>‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∏‡¶∞‡ßç‡¶¨‡¶∏‡¶Æ‡ßü ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ü‡¶õ‡¶ø‡•§</p>
    </div>
  </section>

  <!-- Footer -->
  <div id="footer"></div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";

    // ‚úÖ Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyBIIOv-2Laqugv5_HAIRNJllp8YUfYndF8",
      authDomain: "diamond-recharge-f7f59.firebaseapp.com",
      projectId: "diamond-recharge-f7f59",
      storageBucket: "diamond-recharge-f7f59.appspot.com",
      messagingSenderId: "657717928489",
      appId: "1:657717928489:web:70431ebc9afb7002d4b238"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const userNameBox = document.getElementById("userName");
    const loginBtn = document.getElementById("loginBtn");
    const logoutBtn = document.getElementById("logoutBtn");

    // ‚úÖ Auth State Change
    onAuthStateChanged(auth, (user) => {
      if (user) {
        userNameBox.textContent = user.displayName || user.email;
        loginBtn.style.display = "none";
        logoutBtn.style.display = "inline-block";
        updateFooter(user);
      } else {
        userNameBox.textContent = "Not logged in";
        loginBtn.style.display = "inline-block";
        logoutBtn.style.display = "none";
        updateFooter(null);
      }
    });

    loginBtn.onclick = () => window.location.href = "login.html";
    logoutBtn.onclick = () => signOut(auth);

    // ‚úÖ Load footer.html & set user info
    fetch("footer.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("footer").innerHTML = html;
      });

    function updateFooter(user){
      const footerUser = document.getElementById("footer-user");
      if(!footerUser) return;
      if(user){
        footerUser.innerHTML = `üîê ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá: <span style="color:#06b6d4">${user.displayName || user.email}</span>`;
      } else {
        footerUser.innerHTML = "‚ùå ‡¶Ü‡¶™‡¶®‡¶ø ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßá‡¶®‡¶®‡¶ø";
      }
    }

    // ‚úÖ Live Ticker (Google Sheet CSV ‡¶•‡ßá‡¶ï‡ßá)
    async function loadTicker(){
      try {
        const res = await fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vR4owbSc_h38ouaktOU30TYqH6wy93qYjmW0G5GWXhsBMzsrVSaWzPtVPA7YpyOUmlEpStByT8TxG0-/pub?gid=1098128992&single=true&output=csv");
        const csv = await res.text();
        const rows = csv.split("\n").slice(1).map(r=>r.split(","));
        
        let messages = [];
        rows.forEach(r=>{
          const [time, number, amount, email, status] = r;
          if(!status) return;
          if(status.includes("CANCEL")){
            messages.push(`‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ - ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏‡ßá‡¶≤ ‡¶π‡¶ì‡ßü‡¶æ‡ßü ${email} ${amount} üíé ‡¶´‡ßá‡¶∞‡¶§ ‡¶™‡ßá‡ßü‡ßá‡¶õ‡ßá‡¶® üî¥`);
          } else if(status.includes("COMPLETE")){
            messages.push(`‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ - ${email} ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ${amount} üíé ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶® ‚úÖ`);
          }
        });

        if(messages.length===0){
          document.getElementById("liveTicker").textContent = "‚è≥ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø...";
        } else {
          document.getElementById("liveTicker").textContent = messages.join(" üîî ");
        }
      } catch(e){
        document.getElementById("liveTicker").textContent = "‚ö†Ô∏è ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá";
      }
    }
    loadTicker();
    setInterval(loadTicker, 15000); // ‡¶™‡ßç‡¶∞‡¶§‡¶ø 15 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
  </script>
</body>
</html>