<!-- header.html -->
<header class="site-header">
  <!-- First Row -->
  <div class="header-top">
    <div class="left">
      <img src="assets/logo.png" alt="logo" class="logo" />
      <span id="welcomeText">Welcome, Guest to Sarkar Telecom</span>
    </div>
    <div class="right">
      <span id="userBalance">ðŸ’Ž 0</span>
      <button class="logout-btn" id="logoutBtn">Logout</button>
      <button class="menu-toggle" id="menuToggle">â˜°</button>
    </div>
  </div>

  <!-- Second Row (Navigation) -->
  <nav class="header-nav" id="headerNav">
    <a href="dashboard.html" class="nav-link">Dashboard</a>
    <a href="order.html" class="nav-link">Order</a>
    <a href="order-history.html" class="nav-link">Order History</a>
    <a href="profile.html" class="nav-link">Profile</a>
  </nav>
</header>

<style>
/* Header Theme (Dark + Mobile Friendly) */
.site-header {
  background: #171a21;
  color: #e7eaf0;
  border-bottom: 1px solid #202635;
  font-family: system-ui, sans-serif;
}

.header-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 16px;
}

.header-top .left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.logo {
  width: 36px;
  height: 36px;
  border-radius: 50%;
}

#welcomeText {
  font-weight: 600;
  font-size: 14px;
  color: #e7eaf0;
}

.header-top .right {
  display: flex;
  align-items: center;
  gap: 12px;
}

#userBalance {
  font-weight: 600;
  font-size: 14px;
  color: #06b6d4;
}

.logout-btn {
  background: #1f2430;
  border: 1px solid #2b3347;
  color: #e7eaf0;
  padding: 6px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: 0.2s;
}
.logout-btn:hover {
  background: #ef4444;
  color: #fff;
}

.menu-toggle {
  display: none;
  font-size: 22px;
  background: none;
  border: none;
  color: #e7eaf0;
  cursor: pointer;
}

.header-nav {
  display: flex;
  gap: 12px;
  justify-content: center;
  padding: 8px;
  background: #0f1115;
}

.header-nav .nav-link {
  padding: 8px 14px;
  border-radius: 8px;
  background: #1f2430;
  border: 1px solid #2b3347;
  color: #e7eaf0;
  text-decoration: none;
  font-size: 14px;
  transition: 0.2s;
}
.header-nav .nav-link:hover {
  background: #06b6d4;
  color: #001;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .menu-toggle {
    display: block;
  }
  .header-nav {
    display: none;
    flex-direction: column;
    padding: 10px;
  }
  .header-nav.active {
    display: flex;
  }
}
</style>

<script type="module">
import { auth, db } from "./app.js";
import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

// Toggle menu (mobile)
document.getElementById("menuToggle")?.addEventListener("click", () => {
  document.getElementById("headerNav").classList.toggle("active");
});

// Auth state listener
onAuthStateChanged(auth, async (user) => {
  const welcomeText = document.getElementById("welcomeText");
  const userBalance = document.getElementById("userBalance");

  if (user) {
    // Get user doc from Firestore
    const ref = doc(db, "users", user.uid);
    const snap = await getDoc(ref);
    const data = snap.data() || {};

    welcomeText.textContent = `Welcome, ${user.displayName || data.name || "User"} to Sarkar Telecom`;
    userBalance.textContent = `ðŸ’Ž ${data.balance || 0}`;
  } else {
    welcomeText.textContent = "Welcome, Guest to Sarkar Telecom";
    userBalance.textContent = "ðŸ’Ž 0";
  }
});

// Logout
document.getElementById("logoutBtn")?.addEventListener("click", async () => {
  await signOut(auth);
  localStorage.clear();
  location.href = "login.html";
});
</script>