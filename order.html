<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8"><title>Order Form</title></head>
<body>
  <form id="orderForm">
    <input id="profileId" placeholder="Profile ID" required />
    <input id="amount" type="number" placeholder="Amount" required />
    <select id="product">
      <option>Diamond 100</option>
      <option>Diamond 500</option>
      <option>Diamond 1000</option>
    </select>
    <button type="submit">Submit</button>
  </form>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyl1qiDq2HtSjTR_LbyifCbGcaTKirS6IS-2F5i5Q63BP61qa2j947oZK6bRFdIbYRLnA/exec";
    const SECRET = "12345";

    document.getElementById('orderForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = {
        token: SECRET,
        profileId: document.getElementById('profileId').value,
        amount: document.getElementById('amount').value,
        product: document.getElementById('product').value
      };
      console.log('Sending', data);
      try {
        const res = await fetch(SCRIPT_URL, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(data),
        });
        console.log('Raw response', res);
        const json = await res.json();
        console.log('Parsed:', json);
        alert(json.ok ? '✅ Order placed!' : '❌ Error: ' + (json.error || json.message));
      } catch (err) {
        console.error(err);
        alert('Network error: ' + err.message);
      }
    });
  </script>
</body>
</html>